---
layout: base.njk
pagination:
    data: transport
    size: 1
    alias: vehicle
permalink: "/transport/{{ vehicle.meta_title }}/"
eleventyComputed:
    title: "{{ vehicle.title }}"
    description: "{{ vehicle.shortDescription or vehicle.short_description }}"
---

<section class="py-6">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="mb-6 md:hidden">
            <h1 class="text-2xl text-center font-bold text-[#25425E]">{{ vehicle.title }}</h1>
        </div>

        <div class="flex flex-col md:flex-row gap-8 md:gap-12">
            <!-- Image gallery -->
            <div class="w-full md:w-1/2 flex flex-col gap-4">
                {% if vehicle.images and vehicle.images.length > 0 %}
                    <div class="bg-white rounded-3xl shadow-lg overflow-hidden aspect-[4/3]">
                        <img id="vehicle-main-image" src="{{ vehicle.images[0] | url }}" alt="{{ vehicle.title }}" class="w-full h-full object-cover transition-opacity duration-300">
                    </div>

                    {% if vehicle.images.length > 1 %}
                        <div class="flex flex-wrap gap-3 justify-center">
                            {% for image in vehicle.images %}
                                {% if image %}
                                    <button class="vehicle-thumbnail flex-shrink-0 w-24 h-24 opacity-60 hover:opacity-100 rounded-2xl overflow-hidden transition-opacity cursor-pointer border border-white/20 shadow" data-image-src="{{ image | url }}">
                                        <img src="{{ image | url }}" alt="{{ vehicle.title }} thumbnail {{ loop.index }}" class="w-full h-full object-cover">
                                    </button>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endif %}
            </div>

            <!-- Vehicle info -->
            <div class="w-full md:w-1/2 flex flex-col gap-6">
                <div class="hidden md:block">
                    <h1 class="text-3xl font-bold text-[#25425E]">{{ vehicle.title }}</h1>
                </div>

                <p class="text-primary-deepsea text-base leading-relaxed">{{ vehicle.short_description }}</p>

                {% if vehicle.availability %}
                    <div class="rounded-3xl bg-transparent border-2 border-dotted border-[#25425E]/30 px-6 py-4">
                        <p class="text-base text-[#25425E] leading-relaxed">Денонощна готовност и екип за експресни курсове</p>
                    </div>
                {% endif %}

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                    {% if vehicle.temperature_range %}
                        <div class="rounded-xl border border-[#25425E]/15 bg-[#25425E]/5 px-4 py-3">
                            <p class="text-xs uppercase tracking-wide text-[#25425E]/80 font-semibold">Температура</p>
                            <p class="text-base font-semibold text-[#25425E] mt-1">{{ vehicle.temperature_range }}</p>
                        </div>
                    {% endif %}
                    {% if vehicle.capacity %}
                        <div class="rounded-xl border border-[#25425E]/15 bg-[#25425E]/5 px-4 py-3">
                            <p class="text-xs uppercase tracking-wide text-[#25425E]/80 font-semibold">Капацитет</p>
                            <p class="text-base font-semibold text-[#25425E] mt-1">{{ vehicle.capacity }}</p>
                        </div>
                    {% endif %}
                    {% if vehicle.payload %}
                        <div class="rounded-xl border border-[#25425E]/15 bg-[#25425E]/5 px-4 py-3">
                            <p class="text-xs uppercase tracking-wide text-[#25425E]/80 font-semibold">Товароподемност</p>
                            <p class="text-base font-semibold text-[#25425E] mt-1">{{ vehicle.payload }}</p>
                        </div>
                    {% endif %}
                </div>

                <a href="{{ '/kontakti/' | url }}" class="w-full inline-flex items-center justify-center rounded-full bg-[#25425E] text-white px-8 py-3 text-sm font-semibold uppercase tracking-wide shadow hover:shadow-lg transition-all duration-200">Заяви транспорт</a>
            </div>
        </div>
    </div>
</section>

{% if vehicle.long_description %}
<section class="py-10">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="rounded-3xl bg-white shadow-md border border-[#25425E]/10 p-6 md:p-10">
            <h2 class="text-2xl md:text-3xl font-bold text-[#25425E] mb-4">Описание и предназначение</h2>
            <p class="text-primary-deepsea leading-relaxed text-base md:text-lg">{{ vehicle.long_description }}</p>
        </div>
    </div>
</section>
{% endif %}

{% if vehicle.monitoring and vehicle.monitoring.length > 0 %}
<section class="py-10">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="rounded-3xl bg-white border border-[#25425E]/10 p-6 md:p-8 shadow-md">
            <h2 class="text-2xl font-bold text-[#25425E] mb-4">Мониторинг и проследяване</h2>
            <ul class="space-y-3 text-base text-primary-deepsea leading-relaxed">
                {% for item in vehicle.monitoring %}
                    <li class="flex items-start gap-3">
                        <span class="w-2 h-2 mt-2 rounded-full bg-[#25425E]"></span>
                        <span>{{ item }}</span>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</section>
{% endif %}

{% if vehicle.ideal_loads and vehicle.ideal_loads.length > 0 %}
<section class="py-10">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="rounded-3xl bg-white border border-[#25425E]/10 p-6 md:p-8 shadow-md">
            <h2 class="text-2xl md:text-3xl font-bold text-[#25425E] mb-4">Подходящо за</h2>
            <div class="flex flex-wrap gap-3">
                {% for load in vehicle.ideal_loads %}
                    <span class="px-4 py-2 rounded-full bg-[#25425E]/10 text-[#25425E] text-sm font-semibold">{{ load }}</span>
                {% endfor %}
            </div>
        </div>
    </div>
</section>
{% endif %}

{% if relatedProducts and relatedProducts.length > 0 %}
<section class="py-4 md:py-12">
    <div class="max-w-7xl w-full mx-auto px-4">
        <h2 class="text-2xl md:text-3xl font-bold text-primary-blue mb-8">Други превозни средства</h2>
        <div class="pb-2 flex overflow-x-auto sm:grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 sm:justify-items-center sm:overflow-visible scrollbar-hide">
            {% for item in relatedProducts %}
                <div class="relative flex-shrink-0 sm:flex-shrink flex flex-col bg-white rounded-3xl shadow-md overflow-hidden w-full max-w-[280px] sm:max-w-[300px]">
                    <!-- Diagonal Color Block - Absolute to card -->
                    <div
                        class="absolute top-0 left-0 w-full"
                        style="background-color: {{ item.serviceCardColor or '#D8E8DB' }}; clip-path: polygon(0 0, 100% 0, 100% 45%, 0 85%); height: 200px;"
                    ></div>
                    
                    <div
                        class="absolute top-0 left-0 w-full"
                        style="background-color: #4F4F6C; clip-path: polygon(0 0, 100% 0, 100% 100%, 0 0); height: 200px;"
                    ></div>
                    
                    <!-- Image Container - Full Width, Fixed Height -->
                    <div class="relative h-48 w-full overflow-hidden">
                        <!-- Vehicle Image -->
                        {% if item.images and item.images[0] %}
                            <div class="relative z-10 h-full flex items-center justify-center pt-4">
                                <img
                                    src="{{ item.images[0] | url }}"
                                    alt="{{ item.title }}"
                                    class="w-[80%] max-h-[140px] object-contain"
                                >
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Text Content Container - With Padding -->
                    <div class="px-4 py-4 flex flex-col gap-3 flex-1">
                        <h3 class="text-lg font-semibold text-primary-blue leading-snug">
                            {{ item.title }}
                        </h3>
                        <p class="text-sm text-primary-deepsea leading-relaxed">
                            {{ item.shortDescription or item.short_description }}
                        </p>
                        
                        <div class="flex flex-col gap-2 text-sm">
                            {% if item.temperature_range %}
                                <div class="flex items-center justify-between gap-2 bg-[#25425E]/5 rounded-2xl px-3 py-2">
                                    <span class="font-semibold text-[#25425E]">Температура</span>
                                    <span>{{ item.temperature_range }}</span>
                                </div>
                            {% endif %}
                            {% if item.capacity %}
                                <div class="flex items-center justify-between gap-2 bg-[#25425E]/5 rounded-2xl px-3 py-2">
                                    <span class="font-semibold text-[#25425E]">Капацитет</span>
                                    <span>{{ item.capacity }}</span>
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="w-full flex justify-end mt-2">
                            <a
                                href="{{ ('/transport/' ~ item.meta_title ~ '/') | url }}"
                                class="inline-flex items-center gap-2 rounded-full bg-primary-blue text-white px-5 py-2 text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-200"
                            >
                                Вижте повече
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<script src="{{ '/assets/js/product-carousel.js' | url }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const mainImage = document.getElementById('vehicle-main-image');
        const thumbnails = document.querySelectorAll('.vehicle-thumbnail');

        thumbnails.forEach((thumb) => {
            thumb.addEventListener('click', () => {
                const newSrc = thumb.getAttribute('data-image-src');
                if (!newSrc || !mainImage) {
                    return;
                }

                mainImage.classList.add('opacity-0');
                setTimeout(() => {
                    mainImage.setAttribute('src', newSrc);
                    mainImage.classList.remove('opacity-0');
                    mainImage.classList.add('opacity-100');
                    setTimeout(() => mainImage.classList.remove('opacity-100'), 300);
                }, 150);
            });
        });
    });
</script>
