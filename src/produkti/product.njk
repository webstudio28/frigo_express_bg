---
layout: base.njk
pagination:
    data: products
    size: 1
    alias: vehicle
permalink: "/transport/{{ vehicle.meta_title }}/"
eleventyComputed:
    title: "{{ vehicle.title }}"
    description: "{{ vehicle.short_description }}"
---

<section class="py-6">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="mb-6 md:hidden">
            <h1 class="text-2xl text-center font-bold text-[#25425E]">{{ vehicle.title }}</h1>
        </div>

        <div class="flex flex-col md:flex-row gap-8 md:gap-12">
            <!-- Image gallery -->
            <div class="w-full md:w-1/2 flex flex-col gap-4">
                {% if vehicle.images and vehicle.images.length > 0 %}
                    <div class="bg-white rounded-3xl shadow-lg overflow-hidden aspect-[4/3]">
                        <img id="vehicle-main-image" src="{{ vehicle.images[0] | url }}" alt="{{ vehicle.title }}" class="w-full h-full object-cover transition-opacity duration-300">
                    </div>

                    {% if vehicle.images.length > 1 %}
                        <div class="flex flex-wrap gap-3 justify-center">
                            {% for image in vehicle.images %}
                                {% if image %}
                                    <button class="vehicle-thumbnail flex-shrink-0 w-24 h-24 opacity-60 hover:opacity-100 rounded-2xl overflow-hidden transition-opacity cursor-pointer border border-white/20 shadow" data-image-src="{{ image | url }}">
                                        <img src="{{ image | url }}" alt="{{ vehicle.title }} thumbnail {{ loop.index }}" class="w-full h-full object-cover">
                                    </button>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endif %}
            </div>

            <!-- Vehicle info -->
            <div class="w-full md:w-1/2 flex flex-col gap-6">
                <div class="hidden md:block">
                    <h1 class="text-3xl font-bold text-[#25425E]">{{ vehicle.title }}</h1>
                </div>

                <p class="text-primary-deepsea text-base leading-relaxed">{{ vehicle.short_description }}</p>

                {% if vehicle.stats and vehicle.stats.length > 0 %}
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        {% for stat in vehicle.stats %}
                            <div class="rounded-3xl border border-[#25425E]/15 bg-[#25425E]/5 px-5 py-4">
                                <p class="text-xs uppercase tracking-wide text-[#25425E]/80 font-semibold">{{ stat.label }}</p>
                                <p class="text-lg font-semibold text-[#25425E] mt-1">{{ stat.value }}</p>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}

                {% if vehicle.availability %}
                    <div class="rounded-3xl bg-[#25425E] text-white px-6 py-4 shadow-md">
                        <p class="text-sm uppercase tracking-wide font-semibold">Наличност и поддръжка</p>
                        <p class="text-base mt-1 leading-relaxed">{{ vehicle.availability }}</p>
                    </div>
                {% endif %}

                <div class="flex flex-col sm:flex-row gap-3">
                    <a href="{{ '/kontakti/' | url }}" class="inline-flex items-center justify-center rounded-full bg-[#25425E] text-white px-8 py-3 text-sm font-semibold uppercase tracking-wide shadow hover:shadow-lg transition-all duration-200">Заяви транспорт</a>
                    {% if vehicle.temperature_range %}
                        <span class="inline-flex items-center justify-center rounded-full border border-[#25425E]/40 px-6 py-3 text-sm font-semibold text-[#25425E] bg-[#25425E]/5">Температура: {{ vehicle.temperature_range }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

{% if vehicle.long_description %}
<section class="py-10">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="rounded-3xl bg-white shadow-md border border-[#25425E]/10 p-6 md:p-10">
            <h2 class="text-2xl md:text-3xl font-bold text-[#25425E] mb-4">Описание и предназначение</h2>
            <p class="text-primary-deepsea leading-relaxed text-base md:text-lg">{{ vehicle.long_description }}</p>
        </div>
    </div>
</section>
{% endif %}

{% if vehicle.features and vehicle.features.length > 0 %}
<section class="py-10">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="rounded-3xl bg-[#25425E] text-white p-6 md:p-8 shadow-lg">
                <h2 class="text-2xl font-bold mb-4">Оборудване и технологии</h2>
                <ul class="space-y-3 text-base leading-relaxed">
                    {% for feature in vehicle.features %}
                        <li class="flex items-start gap-3">
                            <span class="w-2.5 h-2.5 mt-2 rounded-full bg-white/80"></span>
                            <span>{{ feature }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            {% if vehicle.monitoring and vehicle.monitoring.length > 0 %}
            <div class="rounded-3xl bg-white border border-[#25425E]/10 p-6 md:p-8 shadow-md">
                <h2 class="text-2xl font-bold text-[#25425E] mb-4">Мониторинг и проследяване</h2>
                <ul class="space-y-3 text-base text-primary-deepsea leading-relaxed">
                    {% for item in vehicle.monitoring %}
                        <li class="flex items-start gap-3">
                            <span class="w-2 h-2 mt-2 rounded-full bg-[#25425E]"></span>
                            <span>{{ item }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

{% if vehicle.ideal_loads and vehicle.ideal_loads.length > 0 %}
<section class="py-10">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="rounded-3xl bg-white border border-[#25425E]/10 p-6 md:p-8 shadow-md">
            <h2 class="text-2xl md:text-3xl font-bold text-[#25425E] mb-4">Подходящо за</h2>
            <div class="flex flex-wrap gap-3">
                {% for load in vehicle.ideal_loads %}
                    <span class="px-4 py-2 rounded-full bg-[#25425E]/10 text-[#25425E] text-sm font-semibold">{{ load }}</span>
                {% endfor %}
            </div>
        </div>
    </div>
</section>
{% endif %}

{% if relatedProducts and relatedProducts.length > 0 %}
<section class="py-10">
    <div class="max-w-7xl w-full mx-auto px-4">
        <div class="flex items-center gap-3 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-[#25425E]">Други превозни средства</h2>
        </div>
        <div class="-mx-4 overflow-x-auto pb-8 md:mx-0 xl:overflow-visible xl:pb-0 custom-scrollbar no-scrollbar">
            <div class="flex gap-6 px-4 xl:px-0 xl:grid xl:grid-cols-4 xl:gap-6 drag-scroll">
                {% for item in relatedProducts %}
                    <div class="group relative flex-shrink-0">
                        <div class="home-product-card h-full p-2 bg-white rounded-3xl relative flex flex-col w-[240px] xl:w-full transition-all duration-300 shadow-md">
                            {% if item.images and item.images.length > 0 %}
                                <div class="home-product-image flex items-center justify-center overflow-hidden">
                                    <img src="{{ item.images[0] | url }}" alt="{{ item.title }}">
                                </div>
                            {% endif %}
                            <div class="pt-3 flex flex-col gap-3 flex-grow">
                                <h3 class="text-md font-bold text-[#25425E]">{{ item.title }}</h3>
                                {% if item.short_description %}
                                    <p class="text-sm text-primary-deepsea leading-relaxed">{{ item.short_description }}</p>
                                {% endif %}
                                <a href="{{ ('/transport/' ~ item.meta_title ~ '/') | url }}" class="block text-center rounded-full border border-[#25425E] text-[#25425E] font-semibold py-2 mt-auto transition-colors duration-200 hover:bg-[#25425E] hover:text-white">Виж детайли</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>
{% endif %}

<script src="{{ '/assets/js/product-carousel.js' | url }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const mainImage = document.getElementById('vehicle-main-image');
        const thumbnails = document.querySelectorAll('.vehicle-thumbnail');

        thumbnails.forEach((thumb) => {
            thumb.addEventListener('click', () => {
                const newSrc = thumb.getAttribute('data-image-src');
                if (!newSrc || !mainImage) {
                    return;
                }

                mainImage.classList.add('opacity-0');
                setTimeout(() => {
                    mainImage.setAttribute('src', newSrc);
                    mainImage.classList.remove('opacity-0');
                    mainImage.classList.add('opacity-100');
                    setTimeout(() => mainImage.classList.remove('opacity-100'), 300);
                }, 150);
            });
        });
    });
</script>
